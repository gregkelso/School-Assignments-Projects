<html>
<head>
    <!-- Bootstrap imports -->
    <link rel="stylesheet" href="libs/bootstrapCSS.min.css">
    <script src="libs/jquery.js"></script>
    <script src="libs/bootstrap.min.js"></script>
    <!-- THREE.js imports -->    
	<script src="libs/three.js"></script>
	<script src="libs/threex.keyboardstate.js"></script>
</head>
<body>
<!-- Modal -->
<!-- Menu -->
<div id="myModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
         Modal content 
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">asdfasdfasdf</h4>
            </div>
            <div class="modal-body">
                <table style="width: 100%">
                    <tr>
                        <td>gjl5;jels;k</td>
                        <td>5lgjsel;rgjsl;j</td>
                    </tr>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<script>
    // Load controls screen
    $(document).ready(function() {
        $('#myModal').modal('show');
    });
        
	var camera, scene, renderer, spotLight, keyboard;
    
    function createBlocks() {
        // Block geo/mat
        var blockGeo = new THREE.BoxGeometry(10, 10, 10);
        var blockMat = new THREE.MeshBasicMaterial({
            color: 0x00ff00,
            transparent: true,
            opacity: 0.8,
            shininess: 60
        });
        // Create the blocks
        var block1 = new THREE.Mesh(blockGeo, blockMat);
        scene.add(block1);
        var block2 = new THREE.Mesh(blockGeo, blockMat);
        scene.add(block2);
        var block3 = new THREE.Mesh(blockGeo, blockMat);
        scene.add(block3);
        var block4 = new THREE.Mesh(blockGeo, blockMat);
        scene.add(block4);
        var block5 = new THREE.Mesh(blockGeo, blockMat);
        scene.add(block5);
        var block6 = new THREE.Mesh(blockGeo, blockMat);
        scene.add(block6);
        var block7 = new THREE.Mesh(blockGeo, blockMat);
        scene.add(block7);
        var block8 = new THREE.Mesh(blockGeo, blockMat);
        scene.add(block8);
        var block9 = new THREE.Mesh(blockGeo, blockMat);
        scene.add(block9);
        // Position the blocks
        block1.position.x = -15;
        block1.position.y = 15;
        block2.position.x = -0;
        block2.position.y = 15;
        block3.position.x = 15;
        block3.position.y = 15;
        block4.position.x = -15;
        block4.position.y = 0;
        block5.position.x = 0;
        block5.position.y = 0;
        block6.position.x = 15;
        block6.position.y = 0;
        block7.position.x = -15;
        block7.position.y = -15;
        block8.position.x = 0;
        block8.position.y = -15;
        block9.position.x = 15;
        block9.position.y = -15;
        
    }
    
	function init()
	{
		keyboard = new THREEx.KeyboardState();
		scene = new THREE.Scene();
        
        // Add blocks
        createBlocks();

		camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 0.1, 1000 );
		camera.position.x = 0;
		camera.position.y = -80;
		camera.position.z = 60;
		camera.lookAt( scene.position );

		renderer = new THREE.WebGLRenderer();
		renderer.setClearColor( 0x6fa79a, 1.0 );
		renderer.setSize( window.innerWidth, window.innerHeight );
		renderer.shadowMapEnabled = true;

        spotLight = new THREE.SpotLight( 0xffffff );
        spotLight.shadowCameraNear = 10;
        spotLight.shadowCameraFar = 500;
        spotLight.castShadow = true;
        spotLight.position.set( 100, 0, 200 );
		spotLight.lookAt( scene.position );
        scene.add( spotLight );
		
		var ambientLight = new THREE.AmbientLight(0x4c9636);
		ambientLight.intensity = .1;
		scene.add( ambientLight );
		
		document.body.appendChild( renderer.domElement );		
		render();
	}

	function render()
	{
        // Handle kayboard input
        if (keyboard.pressed("p")) {
            $('#myModal').modal('show');
        }
        
		requestAnimationFrame( render );
		renderer.render( scene, camera );
	}
	
	window.onload = init;
</script>
</body>
</html>
